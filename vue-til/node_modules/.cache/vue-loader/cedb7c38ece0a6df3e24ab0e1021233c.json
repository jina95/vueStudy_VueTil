{"remainingRequest":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jina/Desktop/vue-endgame/vue-til/src/components/posts/PostEditForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jina/Desktop/vue-endgame/vue-til/src/components/posts/PostEditForm.vue","mtime":1590847883355},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZldGNoUG9zdCwgZWRpdFBvc3QgfSBmcm9tICdAL2FwaS9wb3N0cyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAnJywKICAgICAgY29udGVudHM6ICcnLAogICAgICBsb2dNZXNzYWdlOiAnJywKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNDb250ZW50c1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZW50cy5sZW5ndGggPD0gMjAwOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHN1Ym1pdEZvcm0oKSB7CiAgICAgIGNvbnN0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IGVkaXRQb3N0KGlkLCB7CiAgICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICAgIGNvbnRlbnRzOiB0aGlzLmNvbnRlbnRzLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbWFpbicpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB0aGlzLmxvZ01lc3NhZ2UgPSBlcnJvcjsKICAgICAgfQogICAgfSwKICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgZmV0Y2hQb3N0KGlkKTsKICAgIHRoaXMudGl0bGUgPSBkYXRhLnRpdGxlOwogICAgdGhpcy5jb250ZW50cyA9IGRhdGEuY29udGVudHM7CiAgfSwKfTsK"},{"version":3,"sources":["PostEditForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PostEditForm.vue","sourceRoot":"src/components/posts","sourcesContent":["<template>\n  <div class=\"contents\">\n    <h1 class=\"page-header\">Edit Post</h1>\n    <div class=\"form-wrapper\">\n      <form class=\"form\" @submit.prevent=\"submitForm\">\n        <div>\n          <label for=\"title\">Title:</label>\n          <input id=\"title\" type=\"text\" v-model=\"title\" />\n        </div>\n        <div>\n          <label for=\"contents\">Contents:</label>\n          <textarea id=\"contents\" type=\"text\" rows=\"5\" v-model=\"contents\" />\n          <p\n            v-if=\"!isContentsValid\"\n            class=\"validation-text warning isContentTooLong\"\n          >\n            Contents length must be less than 250\n          </p>\n        </div>\n        <button type=\"submit\" class=\"btn\">Edit</button>\n      </form>\n      <p class=\"log\">\n        {{ logMessage }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fetchPost, editPost } from '@/api/posts';\n\nexport default {\n  data() {\n    return {\n      title: '',\n      contents: '',\n      logMessage: '',\n    };\n  },\n  computed: {\n    isContentsValid() {\n      return this.contents.length <= 200;\n    },\n  },\n  methods: {\n    async submitForm() {\n      const id = this.$route.params.id;\n      try {\n        await editPost(id, {\n          title: this.title,\n          contents: this.contents,\n        });\n        this.$router.push('/main');\n      } catch (error) {\n        console.log(error);\n        this.logMessage = error;\n      }\n    },\n  },\n  async created() {\n    const id = this.$route.params.id;\n    const { data } = await fetchPost(id);\n    this.title = data.title;\n    this.contents = data.contents;\n  },\n};\n</script>\n\n<style scoped>\n.form-wrapper .form {\n  width: 100%;\n}\n.btn {\n  color: white;\n}\n</style>\n"]}]}