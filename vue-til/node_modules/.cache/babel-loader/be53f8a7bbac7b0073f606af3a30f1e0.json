{"remainingRequest":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/babel-loader/lib/index.js!/Users/jina/Desktop/vue-endgame/vue-til/node_modules/eslint-loader/index.js??ref--13-0!/Users/jina/Desktop/vue-endgame/vue-til/src/store/index.js","dependencies":[{"path":"/Users/jina/Desktop/vue-endgame/vue-til/src/store/index.js","mtime":1590925658487},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jina/Desktop/vue-endgame/vue-til/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2ppbmEvRGVza3RvcC92dWUtZW5kZ2FtZS92dWUtdGlsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0QXV0aEZyb21Db29raWUsIGdldFVzZXJGcm9tQ29va2llLCBzYXZlQXV0aFRvQ29va2llLCBzYXZlVXNlclRvQ29va2llIH0gZnJvbSAnQC91dGlscy9jb29raWVzJzsKaW1wb3J0IHsgbG9naW5Vc2VyIH0gZnJvbSAnQC9hcGkvYXV0aCc7ClZ1ZS51c2UoVnVleCk7CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgdXNlcm5hbWU6IGdldFVzZXJGcm9tQ29va2llKCkgfHwgJycsCiAgICB0b2tlbjogZ2V0QXV0aEZyb21Db29raWUoKSB8fCAnJwogIH0sCiAgZ2V0dGVyczogewogICAgaXNMb2dpbjogZnVuY3Rpb24gaXNMb2dpbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcm5hbWUgIT09ICcnOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRVc2VybmFtZTogZnVuY3Rpb24gc2V0VXNlcm5hbWUoc3RhdGUsIHVzZXJuYW1lKSB7CiAgICAgIHN0YXRlLnVzZXJuYW1lID0gdXNlcm5hbWU7CiAgICB9LAogICAgY2xlYXJVc2VybmFtZTogZnVuY3Rpb24gY2xlYXJVc2VybmFtZShzdGF0ZSkgewogICAgICBzdGF0ZS51c2VybmFtZSA9ICcnOwogICAgfSwKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBjbGVhclRva2VuOiBmdW5jdGlvbiBjbGVhclRva2VuKHN0YXRlKSB7CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBMT0dJTjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX0xPR0lOID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmLCB1c2VyRGF0YSkgewogICAgICAgIHZhciBjb21taXQsIF9yZWYyLCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2luVXNlcih1c2VyRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9yZWYyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfcmVmMi5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFRva2VuJywgZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXJuYW1lJywgZGF0YS51c2VyLnVzZXJuYW1lKTsKICAgICAgICAgICAgICAgIHNhdmVBdXRoVG9Db29raWUoZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICBzYXZlVXNlclRvQ29va2llKGRhdGEudXNlci51c2VybmFtZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBMT0dJTihfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9MT0dJTi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gTE9HSU47CiAgICB9KCkKICB9Cn0pOw=="},{"version":3,"sources":["/Users/jina/Desktop/vue-endgame/vue-til/src/store/index.js"],"names":["Vue","Vuex","getAuthFromCookie","getUserFromCookie","saveAuthToCookie","saveUserToCookie","loginUser","use","Store","state","username","token","getters","isLogin","mutations","setUsername","clearUsername","setToken","clearToken","actions","LOGIN","userData","commit","data","console","log","user"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SACEC,iBADF,EAEEC,iBAFF,EAGEC,gBAHF,EAIEC,gBAJF,QAKO,iBALP;AAMA,SAASC,SAAT,QAA0B,YAA1B;AAEAN,GAAG,CAACO,GAAJ,CAAQN,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACO,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAEP,iBAAiB,MAAM,EAD5B;AAELQ,IAAAA,KAAK,EAAET,iBAAiB,MAAM;AAFzB,GADqB;AAK5BU,EAAAA,OAAO,EAAE;AACPC,IAAAA,OADO,mBACCJ,KADD,EACQ;AACb,aAAOA,KAAK,CAACC,QAAN,KAAmB,EAA1B;AACD;AAHM,GALmB;AAU5BI,EAAAA,SAAS,EAAE;AACTC,IAAAA,WADS,uBACGN,KADH,EACUC,QADV,EACoB;AAC3BD,MAAAA,KAAK,CAACC,QAAN,GAAiBA,QAAjB;AACD,KAHQ;AAITM,IAAAA,aAJS,yBAIKP,KAJL,EAIY;AACnBA,MAAAA,KAAK,CAACC,QAAN,GAAiB,EAAjB;AACD,KANQ;AAOTO,IAAAA,QAPS,oBAOAR,KAPA,EAOOE,KAPP,EAOc;AACrBF,MAAAA,KAAK,CAACE,KAAN,GAAcA,KAAd;AACD,KATQ;AAUTO,IAAAA,UAVS,sBAUET,KAVF,EAUS;AAChBA,MAAAA,KAAK,CAACE,KAAN,GAAc,EAAd;AACD;AAZQ,GAViB;AAwB5BQ,EAAAA,OAAO,EAAE;AACDC,IAAAA,KADC;AAAA;AAAA;AAAA,qDACiBC,QADjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACOC,gBAAAA,MADP,QACOA,MADP;AAAA;AAAA,uBAEkBhB,SAAS,CAACe,QAAD,CAF3B;;AAAA;AAAA;AAEGE,gBAAAA,IAFH,SAEGA,IAFH;AAGLC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACZ,KAAjB;AACAW,gBAAAA,MAAM,CAAC,UAAD,EAAaC,IAAI,CAACZ,KAAlB,CAAN;AACAW,gBAAAA,MAAM,CAAC,aAAD,EAAgBC,IAAI,CAACG,IAAL,CAAUhB,QAA1B,CAAN;AACAN,gBAAAA,gBAAgB,CAACmB,IAAI,CAACZ,KAAN,CAAhB;AACAN,gBAAAA,gBAAgB,CAACkB,IAAI,CAACG,IAAL,CAAUhB,QAAX,CAAhB;AAPK,iDAQEa,IARF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAxBmB,CAAf,CAAf","sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport {\n  getAuthFromCookie,\n  getUserFromCookie,\n  saveAuthToCookie,\n  saveUserToCookie,\n} from '@/utils/cookies';\nimport { loginUser } from '@/api/auth';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    username: getUserFromCookie() || '',\n    token: getAuthFromCookie() || '',\n  },\n  getters: {\n    isLogin(state) {\n      return state.username !== '';\n    },\n  },\n  mutations: {\n    setUsername(state, username) {\n      state.username = username;\n    },\n    clearUsername(state) {\n      state.username = '';\n    },\n    setToken(state, token) {\n      state.token = token;\n    },\n    clearToken(state) {\n      state.token = '';\n    },\n  },\n  actions: {\n    async LOGIN({ commit }, userData) {\n      const { data } = await loginUser(userData);\n      console.log(data.token);\n      commit('setToken', data.token);\n      commit('setUsername', data.user.username);\n      saveAuthToCookie(data.token);\n      saveUserToCookie(data.user.username);\n      return data;\n    },\n  },\n});\n"]}]}